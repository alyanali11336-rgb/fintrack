
                list.innerHTML += `
                <div class="tx-card" onclick="openEntry('${t.type}', ${t.id})">
                    <div style="display:flex; align-items:center;">
                        <div class="icon-box"><i class="fas ${ICONS[t.cat] || 'fa-star'}"></i></div>
                        <div><b>${t.desc}</b><br><small style="color:var(--text-dim)">${t.date}</small></div>
                    </div>
                    <b style="color:${t.type === 'income' ? 'var(--success)' : 'white'}">${config.cur}${t.amt.toLocaleString()}</b>
                </div>`;
            });
            document.getElementById('total-bal').innerText = `${config.cur} ${bal.toLocaleString()}`;
        }

        function renderInsights() {
            const cats = {};
            db.filter(t => t.type === 'expense').forEach(t => cats[t.cat] = (cats[t.cat] || 0) + t.amt);
            const ctx = document.getElementById('analyticsChart').getContext('2d');
            if(chart) chart.destroy();
            chart = new Chart(ctx, {
                type: 'doughnut',
                data: { labels: Object.keys(cats), datasets: [{ data: Object.values(cats), backgroundColor: ['#6366f1', '#10b981', '#f43f5e', '#fbbf24', '#a855f7'], borderWidth: 0 }] },
                options: { cutout: '80%', plugins: { legend: { position: 'bottom', labels: { color: '#94a3b8' } } } }
            });
        }

        init();
    </script>
</body>
</html>
