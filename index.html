<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinTrack - UAE Support</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        .glass-card { border: 1px solid rgba(156, 163, 175, 0.2); border-radius: 1.5rem; }
        body { transition: background-color 0.3s; margin: 0; padding-bottom: 80px; font-family: sans-serif; overflow-x: hidden; }
        .ad-placeholder { position: fixed; bottom: 0; left: 0; right: 0; height: 60px; border-top: 1px solid rgba(156, 163, 175, 0.2); display: flex; align-items: center; justify-content: center; font-size: 10px; z-index: 40; background: #000; }
        .active-btn { border-color: #2563eb; background-color: rgba(37, 99, 235, 0.1); color: #2563eb; }
    </style>
</head>
<body>
    <div id="root"></div>
    <div class="ad-placeholder text-slate-600">ADVERTISEMENT SLOT</div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function App() {
            const [transactions, setTransactions] = useState(() => {
                const saved = localStorage.getItem('fintrack_logs');
                return saved ? JSON.parse(saved) : [];
            });
            const [currency, setCurrency] = useState(() => localStorage.getItem('fintrack_curr') || 'Rs');
            const [isDarkMode, setIsDarkMode] = useState(() => localStorage.getItem('fintrack_theme') !== 'false');
            const [showSettings, setShowSettings] = useState(false);
            const [showAdd, setShowAdd] = useState(false);
            const [amount, setAmount] = useState('');
            const [type, setType] = useState('EXPENSE');

            useEffect(() => {
                localStorage.setItem('fintrack_logs', JSON.stringify(transactions));
                localStorage.setItem('fintrack_curr', currency);
                localStorage.setItem('fintrack_theme', isDarkMode);
            }, [transactions, currency, isDarkMode]);

            const total = transactions.reduce((acc, t) => 
                t.type === 'INCOME' ? acc + Number(t.amount) : acc - Number(t.amount), 0);

            const themeClass = isDarkMode ? "bg-black text-white" : "bg-slate-50 text-slate-900";
            const cardClass = isDarkMode ? "bg-slate-900/50 border-slate-800" : "bg-white border-slate-200 shadow-sm";

            return (
                <div className={`min-h-screen p-6 transition-all ${themeClass}`}>
                    {/* Header */}
                    <div className="flex justify-between items-center mb-8">
                        <button onClick={() => setShowSettings(true)} className="w-10 h-10 flex items-center justify-center bg-blue-600/10 rounded-full text-xl">‚öôÔ∏è</button>
                        <h2 className="text-xl font-black tracking-widest text-blue-600 italic">FINTRACK</h2>
                        <div className="w-10"></div>
                    </div>

                    {/* Balance */}
                    <div className={`glass-card p-8 mb-10 text-center ${cardClass}`}>
                        <p className="text-slate-500 text-[10px] mb-2 uppercase font-bold tracking-widest">Available Funds</p>
                        <h1 className={`text-4xl font-black ${total < 0 ? 'text-red-500' : ''}`}>
                            <span className="text-sm mr-1 font-normal opacity-60">{currency}</span>
                            {total.toLocaleString()}
                        </h1>
                    </div>

                    {/* History */}
                    <div className="space-y-4">
                        <p className="text-[10px] font-bold text-slate-500 tracking-widest uppercase">Transaction History</p>
                        {transactions.length === 0 && <div className="text-center py-10 opacity-30 text-xs">No records yet</div>}
                        {transactions.map(t => (
                            <div key={t.id} className={`glass-card p-4 flex justify-between items-center ${cardClass}`}>
                                <div>
                                    <p className="text-[10px] opacity-50">{t.date}</p>
                                    <p className="font-bold text-sm uppercase">{t.type}</p>
                                </div>
                                <p className={`font-black ${t.type === 'INCOME' ? 'text-green-500' : 'text-red-500'}`}>
                                    {t.type === 'INCOME' ? '+' : '-'} {t.amount}
                                </p>
                            </div>
                        ))}
                    </div>

                    {/* Settings Modal */}
                    {showSettings && (
                        <div className="fixed inset-0 bg-black/90 backdrop-blur-md z-50 p-6 flex items-center justify-center">
                            <div className={`w-full max-w-sm glass-card p-8 ${cardClass} border-blue-500/30`}>
                                <h2 className="text-2xl font-black mb-6">PREFERENCES</h2>
                                
                                <div className="mb-6">
                                    <p className="text-[10px] font-bold mb-3 opacity-60 uppercase">System Currency</p>
                                    <div className="grid grid-cols-2 gap-2">
                                        {['Rs', '$', 'AED', '¬£'].map(c => (
                                            <button key={c} onClick={() => setCurrency(c)} 
                                                className={`py-3 rounded-xl border text-sm font-bold transition-all ${currency === c ? 'bg-blue-600 border-blue-600 text-white' : 'border-slate-700'}`}>
                                                {c === 'AED' ? 'üá¶üá™ AED' : c}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                <div className="mb-8 border-t border-slate-800 pt-6">
                                    <p className="text-[10px] font-bold mb-3 opacity-60 uppercase">App Theme</p>
                                    <button onClick={() => setIsDarkMode(!isDarkMode)} className="w-full py-3 bg-slate-800 border border-slate-700 text-white rounded-xl font-bold flex items-center justify-center gap-2">
                                        {isDarkMode ? 'üåû Light Mode' : 'üåô Dark Mode'}
                                    </button>
                                </div>

                                <button onClick={() => setShowSettings(false)} className="w-full py-4 bg-blue-600 text-white rounded-2xl font-black shadow-lg shadow-blue-500/20">SAVE CHANGES</button>
                            </div>
                        </div>
                    )}

                    {/* Add Transaction Modal */}
                    {showAdd && (
                        <div className={`fixed inset-0 z-50 p-8 flex flex-col justify-center ${themeClass}`}>
                            <h2 className="text-2xl font-black mb-6 text-center">NEW TRANSACTION</h2>
                            <div className="flex gap-4 mb-6">
                                <button onClick={() => setType('INCOME')} className={`flex-1 py-4 rounded-2xl font-black ${type === 'INCOME' ? 'bg-green-600 text-white' : 'bg-slate-800 text-slate-400'}`}>INCOME</button>
                                <button onClick={() => setType('EXPENSE')} className={`flex-1 py-4 rounded-2xl font-black ${type === 'EXPENSE' ? 'bg-red-600 text-white' : 'bg-slate-800 text-slate-400'}`}>EXPENSE</button>
                            </div>
                            <div className="text-center mb-10">
                                <span className="text-slate-500 text-xl mr-2">{currency}</span>
                                <input type="number" placeholder="0" className="bg-transparent border-b-2 border-blue-600 text-6xl w-40 py-2 outline-none text-center font-black" value={amount} onChange={(e) => setAmount(e.target.value)} autoFocus />
                            </div>
                            <button onClick={() => { if(amount){ const n={id:Date.now(),amount,type,date:new Date().toLocaleDateString()}; setTransactions([n,...transactions]); setAmount(''); setShowAdd(false); } }} className="w-full bg-blue-600 text-white py-5 rounded-2xl font-black mb-4 shadow-xl">LOG ENTRY</button>
                            <button onClick={() => setShowAdd(false)} className="opacity-40 font-bold uppercase text-[10px] tracking-widest">Go Back</button>
                        </div>
                    )}

                    <button onClick={() => setShowAdd(true)} className="fixed bottom-24 right-8 w-16 h-16 bg-blue-600 text-white rounded-full text-4xl shadow-2xl z-30 flex items-center justify-center">+</button>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
