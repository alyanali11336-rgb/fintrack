<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FinTrack Pro</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; transition: all 0.3s ease; }
        .dark { background-color: #0f1115; color: white; }
        .nav-bar { position: fixed; bottom: 0; width: 100%; max-width: 448px; border-top: 1px solid rgba(0,0,0,0.05); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-[#f8fafc] text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const Icon = ({ name, size = 18 }) => {
            useEffect(() => { if (window.lucide) window.lucide.createIcons(); }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }}></i>;
        };

        function App() {
            // States
            const [logs, setLogs] = useState(() => JSON.parse(localStorage.getItem('ft_l')) || []);
            const [tab, setTab] = useState('home');
            const [modal, setModal] = useState(false);
            const [showAd, setShowAd] = useState(false);
            const [darkMode, setDarkMode] = useState(() => localStorage.getItem('ft_dark') === 'true');

            // --- AD LOGIC ---
            const handlePlusClick = () => {
                const today = new Date().toLocaleDateString('en-GB');
                // Aaj kitni entries ho chuki hain?
                const entriesToday = logs.filter(l => l.date === today).length;

                // Agar 2 entries ho chuki hain (yani ye 3rd click hai), toh AD dikhao
                if (entriesToday >= 2) {
                    setShowAd(true);
                } else {
                    setModal(true);
                }
            };

            const closeAdAndOpenModal = () => {
                setShowAd(false);
                setModal(true);
            };

            // Basic Logic (Rest of your app functions...)
            const saveEntry = (amt) => {
                const d = new Date();
                const newLog = { id: Date.now(), amt, date: d.toLocaleDateString('en-GB'), type: 'EXPENSE', cat: {n: 'General', i: 'tag'} };
                setLogs([newLog, ...logs]);
                setModal(false);
            };

            return (
                <div className={`min-h-screen max-w-md mx-auto pb-32 ${darkMode ? 'dark text-white' : ''}`}>
                    {/* Header */}
                    <header className="p-6 flex justify-between items-center">
                        <h2 className="text-xl font-black text-blue-600 italic">FINTRACK</h2>
                        <button onClick={() => setDarkMode(!darkMode)} className="p-2 bg-slate-100 dark:bg-zinc-800 rounded-full">
                            <Icon name={darkMode ? 'sun' : 'moon'} />
                        </button>
                    </header>

                    {/* Main Content Placeholder */}
                    <div className="p-6 text-center opacity-50">
                        {logs.length} Entries Done Today
                        <p className="text-[10px] mt-2">Note: 3rd entry onwards, you will see an Ad slot.</p>
                    </div>

                    {/* Plus Button */}
                    <button 
                        onClick={handlePlusClick} 
                        className="fixed bottom-32 right-6 w-16 h-16 bg-blue-600 text-white rounded-full flex items-center justify-center shadow-2xl z-40"
                    >
                        <Icon name="plus" size={32}/>
                    </button>

                    {/* VIDEO AD PLACEHOLDER MODAL */}
                    {showAd && (
                        <div className="fixed inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center p-6 text-center">
                            <div className="w-full aspect-video bg-zinc-800 rounded-2xl flex items-center justify-center border border-zinc-700 mb-6 overflow-hidden relative">
                                <span className="text-zinc-500 font-bold italic">VIDEO AD PLAYING...</span>
                                {/* Yahan aapka Ad Network Code (Google AdMob etc.) aayega */}
                                <div className="absolute top-2 right-2 bg-black/50 px-2 py-1 rounded text-[10px] text-white">Sponsored</div>
                            </div>
                            <h3 className="text-white font-black text-xl mb-2">Support FinTrack Pro</h3>
                            <p className="text-zinc-400 text-sm mb-8">Watch a quick video to unlock more entries for today!</p>
                            
                            <button 
                                onClick={closeAdAndOpenModal}
                                className="w-full py-4 bg-white text-black rounded-2xl font-black uppercase tracking-widest"
                            >
                                Skip & Continue
                            </button>
                        </div>
                    )}

                    {/* Entry Modal */}
                    {modal && (
                        <div className={`fixed inset-0 z-[100] p-8 flex flex-col ${darkMode ? 'bg-zinc-950' : 'bg-white'}`}>
                            <h2 className="text-2xl font-black mb-10">Add Transaction</h2>
                            <input 
                                type="number" 
                                placeholder="0" 
                                className="text-6xl font-black text-center bg-transparent outline-none w-full mb-10"
                                onKeyDown={(e) => e.key === 'Enter' && saveEntry(e.target.value)}
                                autoFocus
                            />
                            <button onClick={() => setModal(false)} className="text-zinc-500 font-bold">Cancel</button>
                        </div>
                    )}

                    {/* Nav Bar */}
                    <nav className={`nav-bar h-24 flex justify-around items-center ${darkMode ? 'bg-zinc-900' : 'bg-white'}`}>
                        <div className="opacity-50 flex flex-col items-center"><Icon name="home"/><span className="text-[9px]">HOME</span></div>
                        <div className="opacity-50 flex flex-col items-center"><Icon name="activity"/><span className="text-[9px]">STATS</span></div>
                        <div className="opacity-100 text-blue-600 flex flex-col items-center"><Icon name="settings"/><span className="text-[9px]">SETUP</span></div>
                    </nav>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
